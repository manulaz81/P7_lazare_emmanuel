<!DOCTYPE html>
<html lang="">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<link rel="icon" href="<%= BASE_URL %>favicon.ico" />
		<title><%= htmlWebpackPlugin.options.title %></title>
		<script src="https://cdn.jsdelivr.net/npm/vue"></script>
		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	</head>
	<body>
		<noscript>
			<strong
				>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please
				enable it to continue.</strong
			>
		</noscript>

		<div id="app">
			<form id="formulaire" action="https://www.yahoo.com" method="post" novalidate="">
				<p>Connexion</p>

				<p><label for="name">Name</label></p>
				<p><input id="name" type="text" name="name" /></p>

				<p><label for="email">Email</label></p>
				<p><input id="email" type="email" name="email" /></p>

				<button v-on:click="updatePost()">Se Connecter</button>
				<ul>
					<li v-for="post in posts">{{ post.message }}</li>
				</ul>
			</form>
		</div>

		<script>
			const app = new Vue({
				el: '#app',
				data: {
					posts: [],
				},
				methods: {
					updatePost() {
						axios
							.get('http://localhost:3000/api/messages')
							.then((response) => (this.posts = response.data))
							.catch((erreur) => (this.posts = [{ id: 'erreur de chargement' }]));
					},

					creerUnPost() {
						axios
							.post('http://localhost:3000/api/messages', {
								id: ' ',
								idMessage: ' 1895',
								userId: '',
								message: "c'est un test axios",
								like: '1',
								created: '',
								createdAt: '',
								updateAt: '',
							})
							.then((response) => console.log(response));
					},
				},
			});
		</script>

		<!-- built files will be auto injected -->
	</body>
</html>
